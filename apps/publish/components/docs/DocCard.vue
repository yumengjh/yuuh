<template>
  <NuxtLink :to="`/doc/${doc.docId}`" class="block no-underline text-inherit">
    <NCard hoverable class="h-full border border-#ebeef5!">
      <template #header>
        <div class="flex items-center gap-8px">
          <span class="text-lg leading-none">{{ doc.icon || "ğŸ“„" }}</span>
          <span class="line-clamp-1 text-15px font-600 text-#111827">{{
            doc.title || "æœªå‘½åæ–‡æ¡£"
          }}</span>
        </div>
      </template>
      <NSpace vertical size="small">
        <div class="text-13px text-#6b7280">æ–‡æ¡£ IDï¼š{{ doc.docId }}</div>
        <div class="text-13px text-#6b7280">å·²å‘å¸ƒç‰ˆæœ¬ï¼šv{{ doc.publishedHead }}</div>
        <div class="text-12px text-#9ca3af">{{ formatTime(doc.updatedAt || doc.createdAt) }}</div>
      </NSpace>
    </NCard>
  </NuxtLink>
</template>

<script setup lang="ts">
import { NCard, NSpace } from "naive-ui";
import type { DocumentMeta } from "~/types/api";

defineProps<{
  doc: DocumentMeta;
}>();

const formatTime = (value?: string) => {
  if (!value) return "æ—¶é—´æœªçŸ¥";
  const date = new Date(value);
  if (Number.isNaN(date.getTime())) return value;
  return date.toLocaleString("zh-CN", { hour12: false });
};
</script>
