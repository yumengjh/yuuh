# ğŸ“ å¯Œæ–‡æœ¬æ–‡æ¡£ç¼–è¾‘å™¨

ä¸€ä¸ªåŸºäº React + TypeScript æ„å»ºçš„ç°ä»£åŒ–å¯Œæ–‡æœ¬æ–‡æ¡£ç¼–è¾‘å™¨ï¼Œæä¾›ç±»ä¼¼ Notion çš„ç¼–è¾‘ä½“éªŒï¼Œæ”¯æŒæ–‡æ¡£ç®¡ç†ã€ç‰ˆæœ¬å†å²ã€ä»£ç é«˜äº®ç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

### ç¼–è¾‘å™¨åŠŸèƒ½
- **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šåŸºäº Tiptap çš„å¼ºå¤§ç¼–è¾‘å™¨ï¼Œæ”¯æŒæ‰€è§å³æ‰€å¾—ç¼–è¾‘
- **æ ‡é¢˜å±‚çº§**ï¼šæ”¯æŒ 6 çº§æ ‡é¢˜ï¼ˆH1-H6ï¼‰
- **æ–‡æœ¬æ ¼å¼**ï¼šåŠ ç²—ã€æ–œä½“ã€åˆ é™¤çº¿ã€ä¸‹åˆ’çº¿
- **æ–‡æœ¬æ ·å¼**ï¼šè‡ªå®šä¹‰å­—å·ï¼ˆ13px-48pxï¼‰ã€æ–‡å­—é¢œè‰²ã€èƒŒæ™¯é«˜äº®
- **æ–‡æœ¬å¯¹é½**ï¼šå·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ã€ä¸¤ç«¯å¯¹é½
- **åˆ—è¡¨æ”¯æŒ**ï¼š
  - æ— åºåˆ—è¡¨
  - æœ‰åºåˆ—è¡¨ï¼ˆæ”¯æŒæ•°å­—ã€å­—æ¯ã€ç½—é©¬æ•°å­—ç­‰å¤šç§ç¼–å·æ–¹å¼ï¼‰
  - å¾…åŠåˆ—è¡¨ï¼ˆä»»åŠ¡æ¸…å•ï¼‰
- **ä»£ç å—**ï¼šæ”¯æŒä¸»æµç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ï¼ˆJavaScriptã€TypeScriptã€Pythonã€Javaã€C/C++ã€Goã€Rustã€PHPã€Rubyã€Swiftã€Kotlinã€SQLã€Bashã€JSONã€YAMLã€HTMLã€CSS ç­‰ 30+ ç§è¯­è¨€ï¼‰
- **å¼•ç”¨å—**ï¼šæ”¯æŒå¼•ç”¨æ ·å¼
- **é“¾æ¥**ï¼šæ”¯æŒæ’å…¥å’Œç¼–è¾‘è¶…é“¾æ¥
- **Markdown æ”¯æŒ**ï¼šæ”¯æŒç²˜è´´ Markdown æ ¼å¼å†…å®¹å¹¶è‡ªåŠ¨è½¬æ¢

### æ–‡æ¡£ç®¡ç†
- **å¤šæ–‡æ¡£æ”¯æŒ**ï¼šåˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ–‡æ¡£
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå®Œæ•´çš„æ–‡æ¡£ç‰ˆæœ¬å†å²è®°å½•
- **ç‰ˆæœ¬å¯¹æ¯”**ï¼šæ”¯æŒæŸ¥çœ‹ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚
- **è‡ªåŠ¨ä¿å­˜**ï¼šç¼–è¾‘å†…å®¹è‡ªåŠ¨ä¿å­˜ï¼ˆ800ms é˜²æŠ–ï¼‰
- **æ–‡æ¡£å…ƒæ•°æ®**ï¼šæ”¯æŒæ–‡æ¡£æ ‡é¢˜ã€çŠ¶æ€ã€å¯è§æ€§ç­‰å…ƒä¿¡æ¯ç®¡ç†

### ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **ç¼–è¾‘/é¢„è§ˆæ¨¡å¼**ï¼šæ”¯æŒç¼–è¾‘æ¨¡å¼å’Œåªè¯»é¢„è§ˆæ¨¡å¼åˆ‡æ¢
- **è·¯ç”±å¯¼èˆª**ï¼šåŸºäº React Router çš„å•é¡µåº”ç”¨
- **ä»£ç åˆ†å‰²**ï¼šä¼˜åŒ–çš„æ„å»ºé…ç½®ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ç­‰æŠ€æœ¯æå‡æ€§èƒ½

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **React 19** - UI æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Vite (rolldown-vite)** - æ„å»ºå·¥å…·
- **React Router v7** - è·¯ç”±ç®¡ç†

### ç¼–è¾‘å™¨
- **Tiptap** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶
- **ProseMirror** - åº•å±‚ç¼–è¾‘å™¨å¼•æ“
- **Prism.js** - ä»£ç è¯­æ³•é«˜äº®

### UI ç»„ä»¶
- **Ant Design 6** - UI ç»„ä»¶åº“
- **Ant Design Icons** - å›¾æ ‡åº“

### çŠ¶æ€ç®¡ç†
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Context** - ä¸Šä¸‹æ–‡çŠ¶æ€ç®¡ç†

### æ–‡æ¡£å¼•æ“
- **DocumentEngine** - è‡ªå®šä¹‰æ–‡æ¡£å¼•æ“ï¼ˆæ”¯æŒç‰ˆæœ¬æ§åˆ¶ã€å—çº§ç¼–è¾‘ï¼‰
- **InMemoryStorage** - å†…å­˜å­˜å‚¨ï¼ˆå¯æ›¿æ¢ä¸ºæŒä¹…åŒ–å­˜å‚¨ï¼‰

### å…¶ä»–å·¥å…·
- **marked** - Markdown è§£æ
- **diff-match-patch** - æ–‡æœ¬å·®å¼‚å¯¹æ¯”
- **immer** - ä¸å¯å˜æ•°æ®æ“ä½œ
- **react-window** - è™šæ‹Ÿæ»šåŠ¨

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚
- Node.js >= 18
- pnpm >= 8

### å®‰è£…ä¾èµ–
```bash
pnpm install
```

## ğŸš€ å¼€å‘

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
pnpm dev
```

åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨

### ä»£ç æ£€æŸ¥
```bash
pnpm lint
```

## ğŸ—ï¸ æ„å»º

### ç”Ÿäº§æ„å»º
```bash
pnpm build
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œ gzip å’Œ brotli å‹ç¼©ã€‚

### é¢„è§ˆæ„å»ºç»“æœ
```bash
pnpm preview
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ component/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Footer/        # é¡µè„šç»„ä»¶
â”‚   â”œâ”€â”€ Header/        # é¡µå¤´ç»„ä»¶
â”‚   â”œâ”€â”€ Sidebar/       # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”œâ”€â”€ Toolbar/       # ç¼–è¾‘å™¨å·¥å…·æ 
â”‚   â””â”€â”€ ...
â”œâ”€â”€ context/           # React Context
â”‚   â”œâ”€â”€ documentContext.tsx    # æ–‡æ¡£ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ editContext.tsx        # ç¼–è¾‘çŠ¶æ€ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ dataContext.tsx        # æ•°æ®ä¸Šä¸‹æ–‡
â”œâ”€â”€ editor/            # ç¼–è¾‘å™¨ç›¸å…³
â”‚   â”œâ”€â”€ TiptapNotionEditor.tsx  # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ useDocumentEngineStore.ts  # ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ ...
â”œâ”€â”€ engine/            # æ–‡æ¡£å¼•æ“
â”‚   â”œâ”€â”€ engine.ts      # æ–‡æ¡£å¼•æ“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ storage.ts     # å­˜å‚¨æ¥å£
â”‚   â”œâ”€â”€ diff.ts        # ç‰ˆæœ¬å·®å¼‚å¯¹æ¯”
â”‚   â””â”€â”€ ...
â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Document.tsx   # æ–‡æ¡£é¡µé¢
â”‚   â”œâ”€â”€ History.tsx    # å†å²ç‰ˆæœ¬é¡µé¢
â”‚   â”œâ”€â”€ About.tsx      # å…³äºé¡µé¢
â”‚   â””â”€â”€ ...
â””â”€â”€ routes/            # è·¯ç”±é…ç½®
    â””â”€â”€ index.tsx      # è·¯ç”±å®šä¹‰
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½æ¨¡å—

### 1. æ–‡æ¡£ç¼–è¾‘å™¨ (`TiptapNotionEditor`)
- åŸºäº Tiptap çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- æ”¯æŒå®æ—¶ç¼–è¾‘å’Œè‡ªåŠ¨ä¿å­˜
- é›†æˆä»£ç å—è¯­æ³•é«˜äº®
- æ”¯æŒ Markdown ç²˜è´´

### 2. å·¥å…·æ  (`Toolbar`)
- ä¸°å¯Œçš„æ ¼å¼åŒ–å·¥å…·
- é¢œè‰²é€‰æ‹©å™¨
- å­—å·é€‰æ‹©
- å¯¹é½æ–¹å¼è®¾ç½®

### 3. æ–‡æ¡£å¼•æ“ (`DocumentEngine`)
- å—çº§æ–‡æ¡£æ¨¡å‹
- ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- æ–‡æ¡£æ ‘æ¸²æŸ“
- ç‰ˆæœ¬å·®å¼‚å¯¹æ¯”

### 4. å†å²ç‰ˆæœ¬ (`History`)
- ç‰ˆæœ¬åˆ—è¡¨å±•ç¤º
- ç‰ˆæœ¬é¢„è§ˆ
- ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½

## ğŸ”§ é…ç½®

### æ„å»ºä¼˜åŒ–
é¡¹ç›®å·²é…ç½®ä»£ç åˆ†å‰²ï¼Œå°†å¤§æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ª chunkï¼š
- `tiptap` - ç¼–è¾‘å™¨æ ¸å¿ƒ
- `prosemirror` - ç¼–è¾‘å™¨åº•å±‚å¼•æ“
- `antd` - UI ç»„ä»¶åº“
- `prismjs` - ä»£ç é«˜äº®
- `react-vendor` - React ç›¸å…³
- `editor` - ç¼–è¾‘å™¨ä¸šåŠ¡ä»£ç 
- `components` - ç»„ä»¶ä»£ç 

### ç¯å¢ƒå˜é‡
ç›®å‰ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œå¦‚éœ€æŒä¹…åŒ–å­˜å‚¨ï¼Œå¯æ›¿æ¢ `InMemoryStorage` ä¸ºå…¶ä»–å­˜å‚¨å®ç°ã€‚

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ–‡æ¡£
```typescript
const engine = new DocumentEngine(new InMemoryStorage());
await engine.createDocument({
  docId: "doc1",
  title: "æˆ‘çš„æ–‡æ¡£",
  createdBy: "user1"
});
```

### ç¼–è¾‘æ–‡æ¡£
åœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥è¾“å…¥å†…å®¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜ã€‚

### æŸ¥çœ‹å†å²ç‰ˆæœ¬
è®¿é—® `/history` é¡µé¢æŸ¥çœ‹æ–‡æ¡£çš„æ‰€æœ‰ç‰ˆæœ¬å†å²ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [Tiptap](https://tiptap.dev/) - ä¼˜ç§€çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶
- [Ant Design](https://ant.design/) - ä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€
- [Prism.js](https://prismjs.com/) - ä»£ç è¯­æ³•é«˜äº®åº“
