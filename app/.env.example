# ============================================
# 个人知识库系统 - 环境变量配置示例
# ============================================
# 使用说明:
# 1. 复制此文件为 .env
# 2. 修改相应的配置值
# 3. 不要将 .env 文件提交到版本控制系统
# ============================================

# ============================================
# 应用配置
# ============================================
NODE_ENV=development
PORT=3000

# 应用名称
APP_NAME=Knowledge Base API
APP_VERSION=1.0.0

# 跨域配置（多个源用逗号分隔）
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=your-secure-password
DB_DATABASE=knowledge_base

# 是否启用同步（开发环境可以启用，生产环境必须关闭）
DB_SYNCHRONIZE=true

# 是否启用日志
DB_LOGGING=true

# 连接池配置
DB_POOL_MAX=20
DB_POOL_MIN=5

# ============================================
# Redis 配置
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis 缓存 TTL（秒）
CACHE_TTL=300

# ============================================
# JWT 认证配置
# ============================================
# JWT 密钥（生产环境必须使用强密钥）
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars

# JWT 过期时间
JWT_EXPIRES_IN=24h

# Refresh Token 过期时间
REFRESH_TOKEN_SECRET=your-refresh-token-secret-change-in-production
REFRESH_TOKEN_EXPIRES_IN=7d

# ============================================
# 文件存储配置
# ============================================
# 存储提供商: local, s3, oss, cos
STORAGE_PROVIDER=local

# 本地存储配置
STORAGE_LOCAL_PATH=./uploads
STORAGE_LOCAL_BASE_URL=http://localhost:3000/uploads

# AWS S3 配置（当 STORAGE_PROVIDER=s3 时使用）
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_BUCKET=knowledge-base-assets
AWS_REGION=us-east-1
AWS_S3_ENDPOINT=

# 阿里云 OSS 配置（当 STORAGE_PROVIDER=oss 时使用）
ALIYUN_ACCESS_KEY_ID=your-access-key
ALIYUN_ACCESS_KEY_SECRET=your-secret-key
ALIYUN_OSS_BUCKET=knowledge-base-assets
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_OSS_ENDPOINT=

# 腾讯云 COS 配置（当 STORAGE_PROVIDER=cos 时使用）
TENCENT_SECRET_ID=your-secret-id
TENCENT_SECRET_KEY=your-secret-key
TENCENT_COS_BUCKET=knowledge-base-assets
TENCENT_COS_REGION=ap-guangzhou

# 文件上传限制
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf

# ============================================
# CDN 配置
# ============================================
CDN_ENABLED=false
CDN_BASE_URL=https://cdn.example.com

# ============================================
# 邮件配置（用于邮件通知）
# ============================================
MAIL_ENABLED=false
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_FROM=Knowledge Base <noreply@example.com>

# ============================================
# 日志配置
# ============================================
# 日志级别: error, warn, info, debug
LOG_LEVEL=info

# 日志文件路径
LOG_FILE_PATH=./logs

# 是否输出到控制台
LOG_CONSOLE=true

# ============================================
# 限流配置
# ============================================
# 是否启用限流
RATE_LIMIT_ENABLED=true

# 时间窗口（毫秒）
RATE_LIMIT_TTL=60000

# 最大请求数
RATE_LIMIT_MAX=100

# ============================================
# WebSocket 配置（实时协作）
# ============================================
WS_ENABLED=true
WS_PORT=3001
WS_PATH=/socket.io

# ============================================
# 队列配置（Bull）
# ============================================
QUEUE_ENABLED=true
QUEUE_PREFIX=kb

# ============================================
# 搜索配置
# ============================================
# 全文搜索语言
SEARCH_LANGUAGE=english

# 搜索结果限制
SEARCH_MAX_RESULTS=100

# ============================================
# 导出配置
# ============================================
# 导出文件临时目录
EXPORT_TEMP_DIR=./temp/exports

# 导出文件过期时间（秒）
EXPORT_FILE_TTL=3600

# ============================================
# 安全配置
# ============================================
# 密码最小长度
PASSWORD_MIN_LENGTH=8

# 密码加密轮数
BCRYPT_ROUNDS=10

# 是否启用 HTTPS（生产环境建议启用）
HTTPS_ENABLED=false

# HTTPS 证书路径
SSL_CERT_PATH=
SSL_KEY_PATH=

# ============================================
# API 文档配置
# ============================================
# 是否启用 Swagger 文档
SWAGGER_ENABLED=true

# Swagger 路径
SWAGGER_PATH=/api/docs

# Swagger 基本信息
SWAGGER_TITLE=Knowledge Base API
SWAGGER_DESCRIPTION=个人知识库系统 API 文档
SWAGGER_VERSION=1.0

# ============================================
# 监控配置
# ============================================
# 是否启用监控
MONITORING_ENABLED=false

# Prometheus 端口
PROMETHEUS_PORT=9090

# ============================================
# 第三方服务配置
# ============================================
# Sentry 错误追踪
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Google Analytics
GA_TRACKING_ID=

# ============================================
# 功能开关
# ============================================
# 是否启用用户注册
ENABLE_REGISTRATION=true

# 是否启用评论功能
ENABLE_COMMENTS=true

# 是否启用协作编辑
ENABLE_COLLABORATION=true

# 是否启用公开分享
ENABLE_PUBLIC_SHARING=true

# 是否启用导入功能
ENABLE_IMPORT=true

# 是否启用导出功能
ENABLE_EXPORT=true

# ============================================
# 限额配置
# ============================================
# 每个用户最大工作空间数
MAX_WORKSPACES_PER_USER=10

# 每个工作空间最大文档数
MAX_DOCUMENTS_PER_WORKSPACE=1000

# 每个工作空间最大存储空间（字节）
MAX_STORAGE_PER_WORKSPACE=10737418240

# 每个文档最大块数
MAX_BLOCKS_PER_DOCUMENT=10000

# ============================================
# 其他配置
# ============================================
# 时区
TZ=Asia/Shanghai

# 默认语言
DEFAULT_LANGUAGE=zh-CN

# 分页默认大小
DEFAULT_PAGE_SIZE=20

# 分页最大大小
MAX_PAGE_SIZE=100
